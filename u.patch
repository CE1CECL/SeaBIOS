From a09d3b10d143112b6c809a1fd891ece635a2fe3d Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Sat, 21 Jan 2017 16:47:33 -0600
Subject: [PATCH 1/8] update .gitignore

---
 .gitignore | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/.gitignore b/.gitignore
index f9990feb..1f49fba8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,4 +1,4 @@
 out
 *.pyc
 .config
-.config.old
+.config*.old

From 51c4469ef7a280529a8425b4ebb1c80cc22c6392 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 13 Jun 2014 17:21:57 -0500
Subject: [PATCH 2/8] boot.c: fix 'booting' text for USB devices

Currently, booting from a USB device displays the same text as
booting from a hard disk ('Booting from hard disk').
Identify USB devices based on description string and display
identifying text when booting

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

diff --git a/src/boot.c b/src/boot.c
index 1effd802..1d88a0c0 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -516,6 +516,7 @@ static struct hlist_head BootList VARVERIFY32INIT;
 #define IPL_TYPE_FLOPPY      0x01
 #define IPL_TYPE_HARDDISK    0x02
 #define IPL_TYPE_CDROM       0x03
+#define IPL_TYPE_USB	     0x04
 #define IPL_TYPE_CBFS        0x20
 #define IPL_TYPE_BEV         0x80
 #define IPL_TYPE_BCV         0x81
@@ -593,8 +594,17 @@ boot_add_floppy(struct drive_s *drive, const char *desc, int prio)
 void
 boot_add_hd(struct drive_s *drive, const char *desc, int prio)
 {
-    bootentry_add(IPL_TYPE_HARDDISK, defPrio(prio, DefaultHDPrio)
+    char *usb = "USB";
+    char short_desc[4];
+    memcpy(short_desc, desc, 3);
+    short_desc[3]='\0';
+    if (strcmp(short_desc, usb) == 0) {
+	bootentry_add(IPL_TYPE_USB, defPrio(prio, DefaultHDPrio)
                   , (u32)drive, desc);
+    } else {
+    	bootentry_add(IPL_TYPE_HARDDISK, defPrio(prio, DefaultHDPrio)
+                  , (u32)drive, desc);
+    }
 }
 
 void
@@ -802,7 +812,7 @@ static int HaveHDBoot, HaveFDBoot;
 static void
 add_bev(int type, u32 vector)
 {
-    if (type == IPL_TYPE_HARDDISK && HaveHDBoot++)
+    if ((type == IPL_TYPE_HARDDISK || type == IPL_TYPE_USB) && HaveHDBoot++)
         return;
     if (type == IPL_TYPE_FLOPPY && HaveFDBoot++)
         return;
@@ -840,6 +850,10 @@ bcv_prepboot(void)
             map_hd_drive(pos->drive);
             add_bev(IPL_TYPE_HARDDISK, 0);
             break;
+	case IPL_TYPE_USB:
+            map_hd_drive(pos->drive);
+            add_bev(IPL_TYPE_USB, 0);
+            break;
         case IPL_TYPE_CDROM:
             map_cd_drive(pos->drive);
             // NO BREAK
@@ -1000,6 +1014,10 @@ do_boot(int seq_nr)
         printf("Booting from Hard Disk...\n");
         boot_disk(0x80, 1);
         break;
+    case IPL_TYPE_USB:
+        printf("Booting from USB Device...\n");
+        boot_disk(0x80, 1);
+        break;
     case IPL_TYPE_CDROM:
         boot_cdrom((void*)ie->vector);
         break;

From 70c367a5e23b84f8b14d91c5a339cb3cb88d9cf2 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Tue, 2 Dec 2014 12:49:46 -0600
Subject: [PATCH 3/8] boot.c: don't exit boot menu on 'ESC'

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 13 ++-----------
 1 file changed, 2 insertions(+), 11 deletions(-)

diff --git a/src/boot.c b/src/boot.c
index 1d88a0c0..c0f2ac59 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -755,14 +755,10 @@ interactive_bootmenu(void)
         printf("\nt. TPM Configuration\n");
     }
 
-    // Get key press.  If the menu key is ESC, do not restart boot unless
-    // 1.5 seconds have passed.  Otherwise users (trained by years of
-    // repeatedly hitting keys to enter the BIOS) will end up hitting ESC
-    // multiple times and immediately booting the primary boot device.
-    int esc_accepted_time = irqtimer_calc(menukey == 1 ? 1500 : 0);
+    // Get key press
     for (;;) {
         int keystroke = get_keystroke_full(1000);
-        if (keystroke == 0x011b && !irqtimer_check(esc_accepted_time))
+        if (keystroke == 0x011b)
             continue;
         if (keystroke < 0) // timeout
             continue;
@@ -773,11 +769,6 @@ interactive_bootmenu(void)
             printf("\n");
             tpm_menu();
         }
-        if (scan_code == 1) {
-            // ESC
-            printf("\n");
-            return;
-        }
 
         maxmenu = 0;
         hlist_for_each_entry(pos, &BootList, node) {

From e7592a30ffac1a2c02f7f34ead2292bb3f32a6c2 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 16 Mar 2016 18:04:56 -0500
Subject: [PATCH 4/8] sdcard.c: exit controller setup if ver and capabilities
 are invalid

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/hw/sdcard.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/src/hw/sdcard.c b/src/hw/sdcard.c
index ab7007bc..97517f40 100644
--- a/src/hw/sdcard.c
+++ b/src/hw/sdcard.c
@@ -486,9 +486,13 @@ sdcard_controller_setup(struct sdhci_s *regs, int prio)
     if (!(present_state & SP_CARD_INSERTED))
         // No card present
         return;
-    dprintf(3, "sdhci@%p ver=%x cap=%x %x\n", regs
-            , readw(&regs->controller_version)
-            , readl(&regs->cap_lo), readl(&regs->cap_hi));
+    u16 ver = readw(&regs->controller_version);
+    u32 cap_lo = readl(&regs->cap_lo);
+    u32 cap_hi = readl(&regs->cap_hi);
+    dprintf(3, "sdhci@%p ver=%x cap=%x %x\n", regs, ver, cap_lo, cap_hi);
+    if (ver == 0xffff && cap_lo == 0xffffffff && cap_hi == 0xffffffff)
+        //invalid controller address
+        return;
     sdcard_reset(regs, SRF_ALL);
     writew(&regs->irq_signal, 0);
     writew(&regs->irq_enable, 0x01ff);

From 57123d8a08b425b29a8ed62a30cd4bc1e39876a6 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 14 Dec 2018 01:20:31 -0600
Subject: [PATCH 5/8] sdcard: increase power-on timeout to 25ms

Helps card detection on some Chromebooks

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/hw/sdcard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/hw/sdcard.c b/src/hw/sdcard.c
index 97517f40..2cd4e3d6 100644
--- a/src/hw/sdcard.c
+++ b/src/hw/sdcard.c
@@ -128,7 +128,7 @@ struct sdhci_s {
 
 // SDHCI timeouts
 #define SDHCI_POWER_OFF_TIME   1
-#define SDHCI_POWER_ON_TIME    5
+#define SDHCI_POWER_ON_TIME    25
 #define SDHCI_CLOCK_ON_TIME    1 // 74 clock cycles
 #define SDHCI_POWERUP_TIMEOUT  1000
 #define SDHCI_PIO_TIMEOUT      1000  // XXX - this is just made up

From ea68061ede2561ae75ebc5266cd5910653ba385e Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 7 Sep 2018 18:30:29 -0500
Subject: [PATCH 6/8] buildversion: fall back to commit hash

---
 scripts/buildversion.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/scripts/buildversion.py b/scripts/buildversion.py
index 8875497c..e946571a 100755
--- a/scripts/buildversion.py
+++ b/scripts/buildversion.py
@@ -36,7 +36,7 @@ def git_version():
     if not os.path.exists('.git'):
         logging.debug("No '.git' file/directory found")
         return ""
-    ver = check_output("git describe --always --tags --long --dirty").strip()
+    ver = check_output("git describe --always --tags --long --dirty --always").strip()
     logging.debug("Got git version: %s" % (repr(ver),))
     return ver
 

From 8a9b9a2b328f7968ce281c20add10fd6db1fb746 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 28 May 2014 16:53:38 -0500
Subject: [PATCH 7/8] build: add build scripts, configs

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 build-all.sh                     |  14 +++++
 build-apl-cros.sh                |  15 +++++
 build-bsw-cros.sh                |  19 +++++++
 build-byt-coreboot.sh            |  12 ++++
 build-byt-cros.sh                |  22 ++++++++
 build-hswbdw-book-cros.sh        |  15 +++++
 build-hswbdw-box-cros.sh         |  16 ++++++
 build-hswbdw-coreboot.sh         |   7 +++
 build-kbl-cros.sh                |  22 ++++++++
 build-link-cros.sh               |  16 ++++++
 build-skl-cros.sh                |  16 ++++++
 configs/.config-apl-cros         |  92 ++++++++++++++++++++++++++++++
 configs/.config-bsw-cros         |  92 ++++++++++++++++++++++++++++++
 configs/.config-byt-coreboot     |  16 ++++++
 configs/.config-byt-cros         |  88 +++++++++++++++++++++++++++++
 configs/.config-hswbdw-book-cros |  94 +++++++++++++++++++++++++++++++
 configs/.config-hswbdw-box-cros  |  90 +++++++++++++++++++++++++++++
 configs/.config-hswbdw-coreboot  |  90 +++++++++++++++++++++++++++++
 configs/.config-kbl-cros         |  17 ++++++
 configs/.config-skl-cros         |  88 +++++++++++++++++++++++++++++
 seabios-link-empty.bin           | Bin 0 -> 2097152 bytes
 21 files changed, 841 insertions(+)
 create mode 100755 build-all.sh
 create mode 100755 build-apl-cros.sh
 create mode 100755 build-bsw-cros.sh
 create mode 100755 build-byt-coreboot.sh
 create mode 100755 build-byt-cros.sh
 create mode 100755 build-hswbdw-book-cros.sh
 create mode 100755 build-hswbdw-box-cros.sh
 create mode 100755 build-hswbdw-coreboot.sh
 create mode 100755 build-kbl-cros.sh
 create mode 100755 build-link-cros.sh
 create mode 100755 build-skl-cros.sh
 create mode 100644 configs/.config-apl-cros
 create mode 100644 configs/.config-bsw-cros
 create mode 100644 configs/.config-byt-coreboot
 create mode 100644 configs/.config-byt-cros
 create mode 100644 configs/.config-hswbdw-book-cros
 create mode 100644 configs/.config-hswbdw-box-cros
 create mode 100644 configs/.config-hswbdw-coreboot
 create mode 100644 configs/.config-kbl-cros
 create mode 100644 configs/.config-skl-cros
 create mode 100644 seabios-link-empty.bin

diff --git a/build-all.sh b/build-all.sh
new file mode 100755
index 00000000..42a9ea55
--- /dev/null
+++ b/build-all.sh
@@ -0,0 +1,14 @@
+#!/bin/bash
+#
+
+build_targets=("bsw-cros" "byt-cros" "byt-coreboot" "hswbdw-coreboot" \
+    "hswbdw-book-cros" "hswbdw-box-cros" "skl-cros" "apl-cros" \ 
+    "kbl-cros" "link-cros");
+for device in ${build_targets[@]}
+do
+    ./build-${device}.sh
+    if [ $? -ne 0 ]; then
+        echo "Error building for ${device}; aborting"
+        exit 1
+    fi
+done
\ No newline at end of file
diff --git a/build-apl-cros.sh b/build-apl-cros.sh
new file mode 100755
index 00000000..24ae3458
--- /dev/null
+++ b/build-apl-cros.sh
@@ -0,0 +1,15 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-apl-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-apl-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${filename} add -f ./out/vgabios.bin -n vgaroms/seavgabios.bin -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.emmc.apl -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-bsw-cros.sh b/build-bsw-cros.sh
new file mode 100755
index 00000000..8add7be8
--- /dev/null
+++ b/build-bsw-cros.sh
@@ -0,0 +1,19 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-bsw-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-bsw-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${filename} add -f ./out/vgabios.bin -n vgaroms/seavgabios.bin -t optionrom
+bootorder=$(mktemp)
+echo -e "/rom@etc/sdcard0\n" > ${bootorder}
+cbfstool ${filename} add -f ${bootorder} -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} add-int -i 0xd131d000 -n etc/sdcard0
+cbfstool ${filename} add-int -i 0xd131f000 -n etc/sdcard1
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-byt-coreboot.sh b/build-byt-coreboot.sh
new file mode 100755
index 00000000..f14f1de5
--- /dev/null
+++ b/build-byt-coreboot.sh
@@ -0,0 +1,12 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-byt-coreboot .config
+make olddefconfig
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+cp ./out/bios.bin.elf ../coreboot/seabios-byt.bin.elf
+filename="seabios-byt_bootstub-mrchromebox_`date +"%Y%m%d"`.bin"
+cp ./out/bios.bin.elf ${filename}
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-byt-cros.sh b/build-byt-cros.sh
new file mode 100755
index 00000000..6adbe4c6
--- /dev/null
+++ b/build-byt-cros.sh
@@ -0,0 +1,22 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-byt-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-byt-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${filename} add -f ~/dev/coreboot/blobs/soc/intel/byt/book/vgabios.bin -n pci8086,0f31.rom -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.emmc -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} add-int -i 0xd071f000 -n etc/sdcard0
+cbfstool ${filename} add-int -i 0xd071d000 -n etc/sdcard1
+cbfstool ${filename} add-int -i 0xd071c000 -n etc/sdcard2
+cbfstool ${filename} add-int -i 0xd081f000 -n etc/sdcard3
+cbfstool ${filename} add-int -i 0xd081c000 -n etc/sdcard4
+cbfstool ${filename} add-int -i 0xd091f000 -n etc/sdcard5
+cbfstool ${filename} add-int -i 0xd091c000 -n etc/sdcard6
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-hswbdw-book-cros.sh b/build-hswbdw-book-cros.sh
new file mode 100755
index 00000000..ca20a61f
--- /dev/null
+++ b/build-hswbdw-book-cros.sh
@@ -0,0 +1,15 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-hswbdw-book-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-hswbdw_book-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+cbfstool ${filename} add -f ./out/vgabios.bin -n vgaroms/seavgabios.bin -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.ssd -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-hswbdw-box-cros.sh b/build-hswbdw-box-cros.sh
new file mode 100755
index 00000000..69cb7140
--- /dev/null
+++ b/build-hswbdw-box-cros.sh
@@ -0,0 +1,16 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-hswbdw-box-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-hswbdw_box-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+cbfstool ${filename} add -f ~/dev/coreboot/blobs/soc/intel/hsw/box/vgabios.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.ssd -n bootorder -t raw
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/links.hswbdw -n links -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-hswbdw-coreboot.sh b/build-hswbdw-coreboot.sh
new file mode 100755
index 00000000..84834c9e
--- /dev/null
+++ b/build-hswbdw-coreboot.sh
@@ -0,0 +1,7 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-hswbdw-coreboot .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+cp ./out/bios.bin.elf ../coreboot/seabios-hswbdw.bin.elf
diff --git a/build-kbl-cros.sh b/build-kbl-cros.sh
new file mode 100755
index 00000000..266b7fa2
--- /dev/null
+++ b/build-kbl-cros.sh
@@ -0,0 +1,22 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-kbl-cros .config
+make olddefconfig
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-kbl-mrchromebox_`date +"%Y%m%d"`.bin"
+filename2="seabios-kbl_18-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x200000
+cbfstool ${filename2} create -m x86 -s 0x1C0000
+for fname in ${filename} ${filename2}
+do
+cbfstool ${fname} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${fname} add -f ./out/vgabios.bin -n vgaroms/seavgabios.bin -t optionrom
+echo "/pci@i0cf8/*@1e,4/drive@0/disk@0\n" > /tmp/bootorder
+cbfstool ${fname} add -f /tmp/bootorder -n bootorder -t raw
+cbfstool ${fname} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${fname} print
+md5sum ${fname} > ${fname}.md5
+mv ${fname}* ~/dev/firmware/
+done
\ No newline at end of file
diff --git a/build-link-cros.sh b/build-link-cros.sh
new file mode 100755
index 00000000..2f490a58
--- /dev/null
+++ b/build-link-cros.sh
@@ -0,0 +1,16 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-hswbdw-box-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-link-mrchromebox_`date +"%Y%m%d"`.bin"
+#cbfstool ${filename} create -m x86 -s 0x00200000 -H $((0x200000 - 0x60)) 
+cp seabios-link-empty.bin ${filename}
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${filename} add -f ~/dev/coreboot/blobs/mainboard/google/link/vgabios.bin -n pci8086,0166.rom -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.ssd -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-skl-cros.sh b/build-skl-cros.sh
new file mode 100755
index 00000000..2a01f344
--- /dev/null
+++ b/build-skl-cros.sh
@@ -0,0 +1,16 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-skl-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-skl-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+cbfstool ${filename} add -f ~/dev/coreboot/blobs/soc/intel/skl/vgabios.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.ssd -n bootorder -t raw
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/links.skl -n links -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
\ No newline at end of file
diff --git a/configs/.config-apl-cros b/configs/.config-apl-cros
new file mode 100644
index 00000000..a75a57d9
--- /dev/null
+++ b/configs/.config-apl-cros
@@ -0,0 +1,92 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xfffb1000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+# CONFIG_NO_VGABIOS is not set
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+CONFIG_VGA_COREBOOT=y
+CONFIG_BUILD_VGABIOS=y
+CONFIG_VGA_EMULATE_TEXT=y
+CONFIG_VGA_FIXUP_ASM=y
+CONFIG_VGA_ALLOCATE_EXTRA_STACK=y
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+CONFIG_VGA_VBE=y
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-bsw-cros b/configs/.config-bsw-cros
new file mode 100644
index 00000000..68bad9e3
--- /dev/null
+++ b/configs/.config-bsw-cros
@@ -0,0 +1,92 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+# CONFIG_NO_VGABIOS is not set
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+CONFIG_VGA_COREBOOT=y
+CONFIG_BUILD_VGABIOS=y
+CONFIG_VGA_EMULATE_TEXT=y
+CONFIG_VGA_FIXUP_ASM=y
+CONFIG_VGA_ALLOCATE_EXTRA_STACK=y
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+CONFIG_VGA_VBE=y
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-byt-coreboot b/configs/.config-byt-coreboot
new file mode 100644
index 00000000..7124d077
--- /dev/null
+++ b/configs/.config-byt-coreboot
@@ -0,0 +1,16 @@
+CONFIG_COREBOOT=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_CBFS_LOCATION=0x0
+# CONFIG_MULTIBOOT is not set
+# CONFIG_ATA is not set
+# CONFIG_MEGASAS is not set
+# CONFIG_NVME is not set
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+# CONFIG_MOUSE is not set
+# CONFIG_TCGBIOS is not set
+CONFIG_DEBUG_LEVEL=3
diff --git a/configs/.config-byt-cros b/configs/.config-byt-cros
new file mode 100644
index 00000000..1154baca
--- /dev/null
+++ b/configs/.config-byt-cros
@@ -0,0 +1,88 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+CONFIG_MEGASAS=y
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-hswbdw-book-cros b/configs/.config-hswbdw-book-cros
new file mode 100644
index 00000000..1ed77458
--- /dev/null
+++ b/configs/.config-hswbdw-book-cros
@@ -0,0 +1,94 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLOPPY is not set
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+CONFIG_RTC_TIMER=y
+CONFIG_HARDWARE_IRQ=y
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+# CONFIG_NO_VGABIOS is not set
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+CONFIG_VGA_COREBOOT=y
+CONFIG_BUILD_VGABIOS=y
+CONFIG_VGA_EMULATE_TEXT=y
+CONFIG_VGA_FIXUP_ASM=y
+CONFIG_VGA_ALLOCATE_EXTRA_STACK=y
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+CONFIG_VGA_VBE=y
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-hswbdw-box-cros b/configs/.config-hswbdw-box-cros
new file mode 100644
index 00000000..ffe6c53c
--- /dev/null
+++ b/configs/.config-hswbdw-box-cros
@@ -0,0 +1,90 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+CONFIG_BOOTSPLASH=y
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLOPPY is not set
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+CONFIG_USB_UHCI=y
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+CONFIG_RTC_TIMER=y
+CONFIG_HARDWARE_IRQ=y
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+CONFIG_TCGBIOS=y
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-hswbdw-coreboot b/configs/.config-hswbdw-coreboot
new file mode 100644
index 00000000..206e990d
--- /dev/null
+++ b/configs/.config-hswbdw-coreboot
@@ -0,0 +1,90 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0x0
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLOPPY is not set
+CONFIG_FLASH_FLOPPY=y
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+CONFIG_RTC_TIMER=y
+CONFIG_HARDWARE_IRQ=y
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+CONFIG_TCGBIOS=y
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-kbl-cros b/configs/.config-kbl-cros
new file mode 100644
index 00000000..3951fe5a
--- /dev/null
+++ b/configs/.config-kbl-cros
@@ -0,0 +1,17 @@
+CONFIG_COREBOOT=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_CBFS_LOCATION=0xffc00000
+# CONFIG_MULTIBOOT is not set
+# CONFIG_ATA is not set
+# CONFIG_MEGASAS is not set
+# CONFIG_FLASH_FLOPPY is not set
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+# CONFIG_MOUSE is not set
+# CONFIG_TCGBIOS is not set
+CONFIG_VGA_COREBOOT=y
+CONFIG_DEBUG_LEVEL=3
diff --git a/configs/.config-skl-cros b/configs/.config-skl-cros
new file mode 100644
index 00000000..b91c24a9
--- /dev/null
+++ b/configs/.config-skl-cros
@@ -0,0 +1,88 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffc00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLASH_FLOPPY is not set
+# CONFIG_NVME is not set
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/seabios-link-empty.bin b/seabios-link-empty.bin
new file mode 100644
index 0000000000000000000000000000000000000000..2b1396f0c2fd96bb58b0c9ed8c0ddadbc4f47f7e
GIT binary patch
literal 2097152
zcmeIu!3l#v5J1tjl6dsGslX@!g@E8eQl6bz%IXlY0Izu;h8dXK`@H6U7?*c?ly5mo
zznXJjD}EwCfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7{!?I@
WyFTaqOm&LdbK<T-B#yhSWh*=L&1j_n

literal 0
HcmV?d00001


From 405579c3e6647f7b10b2040800f17138d5a314eb Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Tue, 9 Nov 2021 15:02:49 -0600
Subject: [PATCH 8/8] cootboot table autolocate

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/Kconfig       |  9 -----
 src/fw/coreboot.c | 91 ++++++++++++++++++++++++++++++-----------------
 2 files changed, 58 insertions(+), 42 deletions(-)

diff --git a/src/Kconfig b/src/Kconfig
index 3a8ffa15..51ba827b 100644
--- a/src/Kconfig
+++ b/src/Kconfig
@@ -93,15 +93,6 @@ endchoice
         help
             Support CBFS files compressed using the lzma decompression
             algorithm.
-    config CBFS_LOCATION
-        depends on COREBOOT_FLASH
-        hex "CBFS memory end location"
-        default 0
-        help
-            Memory address of where the CBFS data ends.  This should
-            be zero for normal builds.  It may be a non-zero value if
-            the CBFS filesystem is at a non-standard location (eg,
-            0xffe00000 if CBFS ends 2Meg below the end of flash).
 
     config MULTIBOOT
         depends on COREBOOT
diff --git a/src/fw/coreboot.c b/src/fw/coreboot.c
index 7c0954b5..8a35c1d0 100644
--- a/src/fw/coreboot.c
+++ b/src/fw/coreboot.c
@@ -88,6 +88,18 @@ struct cbmem_console {
 #define CBMC_OVERFLOW (1 << 31)
 static struct cbmem_console *cbcon = NULL;
 
+#define CB_TAG_BOOT_MEDIA_PARAMS 0x30
+
+struct cb_boot_media_params {
+  u32 tag;
+  u32 size;
+  /* offsets are relative to start of boot media */
+  u64 fmap_offset;
+  u64 cbfs_offset;
+  u64 cbfs_size;
+  u64 boot_media_size;
+};
+
 static u16
 ipchksum(char *buf, int count)
 {
@@ -146,7 +158,12 @@ find_cb_subtable(struct cb_header *cbh, u32 tag)
 struct cb_header *
 find_cb_table(void)
 {
-    struct cb_header *cbh = find_cb_header(0, 0x1000);
+    static struct cb_header *cbh;
+
+    if (cbh)
+        return cbh;
+
+    cbh= find_cb_header(0, 0x1000);
     if (!cbh)
         return NULL;
     struct cb_forward *cbf = find_cb_subtable(cbh, CB_TAG_FORWARD);
@@ -317,20 +334,8 @@ ulzma(u8 *dst, u32 maxlen, const u8 *src, u32 srclen)
  * Coreboot flash format
  ****************************************************************/
 
-#define CBFS_HEADER_MAGIC 0x4F524243
-#define CBFS_VERSION1 0x31313131
-
-struct cbfs_header {
-    u32 magic;
-    u32 version;
-    u32 romsize;
-    u32 bootblocksize;
-    u32 align;
-    u32 offset;
-    u32 pad[2];
-} PACKED;
-
 #define CBFS_FILE_MAGIC 0x455649484352414cLL // LARCHIVE
+#define CBFS_ALIGNMENT 64
 
 struct cbfs_file {
     u64 magic;
@@ -429,30 +434,50 @@ coreboot_cbfs_init(void)
     if (!CONFIG_COREBOOT_FLASH)
         return;
 
-    struct cbfs_header *hdr = *(void **)(CONFIG_CBFS_LOCATION - 4);
-    if ((u32)hdr & 0x03) {
-        dprintf(1, "Invalid CBFS pointer %p\n", hdr);
+    dprintf(3, "Attempting to initialize coreboot cbfs\n");
+
+    struct cb_header *cbh = find_cb_table();
+    if (!cbh) {
+        dprintf(1, "cbfs_init: unable to find cb table\n");
         return;
     }
-    if (CONFIG_CBFS_LOCATION && (u32)hdr > CONFIG_CBFS_LOCATION)
-        // Looks like the pointer is relative to CONFIG_CBFS_LOCATION
-        hdr = (void*)hdr + CONFIG_CBFS_LOCATION;
-    if (hdr->magic != cpu_to_be32(CBFS_HEADER_MAGIC)) {
-        dprintf(1, "Unable to find CBFS (ptr=%p; got %x not %x)\n"
-                , hdr, hdr->magic, cpu_to_be32(CBFS_HEADER_MAGIC));
+
+    struct cb_boot_media_params *cbbmp =
+        find_cb_subtable(cbh, CB_TAG_BOOT_MEDIA_PARAMS);
+
+    if (!cbbmp) {
+        dprintf(1, "cbfs_init: unable to find boot media params\n");
         return;
     }
-    dprintf(1, "Found CBFS header at %p\n", hdr);
 
-    u32 romsize = be32_to_cpu(hdr->romsize);
-    u32 romstart = CONFIG_CBFS_LOCATION - romsize;
-    struct cbfs_file *fhdr = (void*)romstart + be32_to_cpu(hdr->offset);
+    const u32 romsize = cbbmp->boot_media_size;
+    const u32 cbfs_start = cbbmp->cbfs_offset - romsize;
+    const u32 cbfs_end = cbfs_start + cbbmp->cbfs_size - 1;
+
+    dprintf(3, "cbfs_init: cbfs_start=0x%08x, cbfs_end=0x%08x\n", cbfs_start,
+            cbfs_end);
+
+    u32 offset = cbfs_start;
+
     for (;;) {
-        if ((u32)fhdr - romstart > romsize)
-            break;
-        u64 magic = fhdr->magic;
-        if (magic != CBFS_FILE_MAGIC)
+        if (offset > cbfs_end || offset < cbfs_start)
             break;
+
+        struct cbfs_file *fhdr = (void*)offset;
+
+        if (fhdr->magic != CBFS_FILE_MAGIC) {
+            offset++;
+            offset = ALIGN(offset, CBFS_ALIGNMENT);
+            continue;
+        }
+
+        /* Skip empty space */
+        if (strcmp(fhdr->filename, "") == 0) {
+            offset += ALIGN(be32_to_cpu(fhdr->offset) + be32_to_cpu(fhdr->len)
+                           , CBFS_ALIGNMENT);
+            continue;
+        }
+
         struct cbfs_romfile_s *cfile = malloc_tmp(sizeof(*cfile));
         if (!cfile) {
             warn_noalloc();
@@ -473,8 +498,8 @@ coreboot_cbfs_init(void)
         }
         romfile_add(&cfile->file);
 
-        fhdr = (void*)ALIGN((u32)cfile->data + cfile->rawsize
-                            , be32_to_cpu(hdr->align));
+        offset = ALIGN((u32)cfile->data + cfile->rawsize
+                       , CBFS_ALIGNMENT);
     }
 
     process_links_file();
From 3e59607b2599a5d5ec2bacd90d89a8d58e8c4f16 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Sat, 21 Jan 2017 16:47:33 -0600
Subject: [PATCH 1/9] update .gitignore

---
 .gitignore | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/.gitignore b/.gitignore
index f9990feb..1f49fba8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,4 +1,4 @@
 out
 *.pyc
 .config
-.config.old
+.config*.old

From 56bb0da996b4253f01ca01dcefdbf9ff4612acd4 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 13 Jun 2014 17:20:23 -0500
Subject: [PATCH 2/9] boot.c: skip boot menu, boot timeout if only one boot
 device

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/boot.c b/src/boot.c
index ff705fd4..eca1fa22 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -464,6 +464,12 @@ interactive_bootmenu(void)
     if (! CONFIG_BOOTMENU || !romfile_loadint("etc/show-boot-menu", 1))
         return;
 
+    //skip menu if only one boot device
+    if ( NULL == BootList.first->next ) {
+	printf("\n");
+	return;
+    }
+
     while (get_keystroke(0) >= 0)
         ;
 

From b77ed3a26f8d3d298ac84f889be3aa9b9654b09f Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 13 Jun 2014 17:21:57 -0500
Subject: [PATCH 3/9] boot.c: fix 'booting' text for USB devices

Currently, booting from a USB device displays the same text as
booting from a hard disk ('Booting from hard disk').
Identify USB devices based on description string and display
identifying text when booting

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

diff --git a/src/boot.c b/src/boot.c
index eca1fa22..c0f3bca8 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -311,6 +311,7 @@ static struct hlist_head BootList VARVERIFY32INIT;
 #define IPL_TYPE_FLOPPY      0x01
 #define IPL_TYPE_HARDDISK    0x02
 #define IPL_TYPE_CDROM       0x03
+#define IPL_TYPE_USB	     0x04
 #define IPL_TYPE_CBFS        0x20
 #define IPL_TYPE_BEV         0x80
 #define IPL_TYPE_BCV         0x81
@@ -388,8 +389,17 @@ boot_add_floppy(struct drive_s *drive, const char *desc, int prio)
 void
 boot_add_hd(struct drive_s *drive, const char *desc, int prio)
 {
-    bootentry_add(IPL_TYPE_HARDDISK, defPrio(prio, DefaultHDPrio)
+    char *usb = "USB";
+    char short_desc[4];
+    memcpy(short_desc, desc, 3);
+    short_desc[3]='\0';
+    if (strcmp(short_desc, usb) == 0) {
+	bootentry_add(IPL_TYPE_USB, defPrio(prio, DefaultHDPrio)
                   , (u32)drive, desc);
+    } else {
+    	bootentry_add(IPL_TYPE_HARDDISK, defPrio(prio, DefaultHDPrio)
+                  , (u32)drive, desc);
+    }
 }
 
 void
@@ -548,7 +558,7 @@ static int HaveHDBoot, HaveFDBoot;
 static void
 add_bev(int type, u32 vector)
 {
-    if (type == IPL_TYPE_HARDDISK && HaveHDBoot++)
+    if ((type == IPL_TYPE_HARDDISK || type == IPL_TYPE_USB) && HaveHDBoot++)
         return;
     if (type == IPL_TYPE_FLOPPY && HaveFDBoot++)
         return;
@@ -586,6 +596,10 @@ bcv_prepboot(void)
             map_hd_drive(pos->drive);
             add_bev(IPL_TYPE_HARDDISK, 0);
             break;
+	case IPL_TYPE_USB:
+            map_hd_drive(pos->drive);
+            add_bev(IPL_TYPE_USB, 0);
+            break;
         case IPL_TYPE_CDROM:
             map_cd_drive(pos->drive);
             // NO BREAK
@@ -746,6 +760,10 @@ do_boot(int seq_nr)
         printf("Booting from Hard Disk...\n");
         boot_disk(0x80, 1);
         break;
+    case IPL_TYPE_USB:
+        printf("Booting from USB Device...\n");
+        boot_disk(0x80, 1);
+        break;
     case IPL_TYPE_CDROM:
         boot_cdrom((void*)ie->vector);
         break;

From 55d313a58ba83c6a78d991c76f1f58985f4b87b9 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Tue, 2 Dec 2014 12:49:46 -0600
Subject: [PATCH 4/9] boot.c: don't exit boot menu on 'ESC'

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 13 ++-----------
 1 file changed, 2 insertions(+), 11 deletions(-)

diff --git a/src/boot.c b/src/boot.c
index c0f3bca8..efa781aa 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -514,26 +514,17 @@ interactive_bootmenu(void)
         printf("\nt. TPM Configuration\n");
     }
 
-    // Get key press.  If the menu key is ESC, do not restart boot unless
-    // 1.5 seconds have passed.  Otherwise users (trained by years of
-    // repeatedly hitting keys to enter the BIOS) will end up hitting ESC
-    // multiple times and immediately booting the primary boot device.
-    int esc_accepted_time = irqtimer_calc(menukey == 1 ? 1500 : 0);
+    // Get key press
     for (;;) {
         scan_code = get_keystroke(1000);
-        if (scan_code == 1 && !irqtimer_check(esc_accepted_time))
-            continue;
         if (tpm_can_show_menu() && scan_code == 20 /* t */) {
             printf("\n");
             tpm_menu();
         }
-        if (scan_code >= 1 && scan_code <= maxmenu+1)
+	if (scan_code > 1 && scan_code <= maxmenu+1)
             break;
     }
     printf("\n");
-    if (scan_code == 0x01)
-        // ESC
-        return;
 
     // Find entry and make top priority.
     int choice = scan_code - 1;

From 41621d942939b602f2eaf0ddd9a1baa37caa17ff Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 16 Mar 2016 18:04:56 -0500
Subject: [PATCH 5/9] sdcard.c: exit controller setup if ver and capabilities
 are invalid

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/hw/sdcard.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/src/hw/sdcard.c b/src/hw/sdcard.c
index ab7007bc..97517f40 100644
--- a/src/hw/sdcard.c
+++ b/src/hw/sdcard.c
@@ -486,9 +486,13 @@ sdcard_controller_setup(struct sdhci_s *regs, int prio)
     if (!(present_state & SP_CARD_INSERTED))
         // No card present
         return;
-    dprintf(3, "sdhci@%p ver=%x cap=%x %x\n", regs
-            , readw(&regs->controller_version)
-            , readl(&regs->cap_lo), readl(&regs->cap_hi));
+    u16 ver = readw(&regs->controller_version);
+    u32 cap_lo = readl(&regs->cap_lo);
+    u32 cap_hi = readl(&regs->cap_hi);
+    dprintf(3, "sdhci@%p ver=%x cap=%x %x\n", regs, ver, cap_lo, cap_hi);
+    if (ver == 0xffff && cap_lo == 0xffffffff && cap_hi == 0xffffffff)
+        //invalid controller address
+        return;
     sdcard_reset(regs, SRF_ALL);
     writew(&regs->irq_signal, 0);
     writew(&regs->irq_enable, 0x01ff);

From c68f866710599bfb7a77ef04f8936b3da52b41e7 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 12 Aug 2016 14:21:58 -0500
Subject: [PATCH 6/9] ps2port: adjust init routine to fix PS2 keyboard issues

PS2 keyboards on Chromebooks with Upstream coreboot + SeaBIOS often
fail to init properly / register keystrokes.  Modify ps2port init
to match that of Tianocore, which doesn't have said issues.

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/hw/ps2port.c | 18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)

diff --git a/src/hw/ps2port.c b/src/hw/ps2port.c
index 88b1059a..2c334c06 100644
--- a/src/hw/ps2port.c
+++ b/src/hw/ps2port.c
@@ -465,6 +465,14 @@ ps2_keyboard_setup(void *data)
     if (ret)
         return;
 
+    // Disable KB/mouse interfaces
+    ret = i8042_command(I8042_CMD_KBD_DISABLE, NULL);
+    if (ret)
+        return;
+    ret = i8042_command(I8042_CMD_AUX_DISABLE, NULL);
+    if (ret)
+        return;
+
     // Controller self-test.
     u8 param[2];
     ret = i8042_command(I8042_CMD_CTL_TEST, param);
@@ -475,6 +483,11 @@ ps2_keyboard_setup(void *data)
         return;
     }
 
+    // KB write CMD
+    ret = i8042_command(I8042_CMD_CTL_WCTR, NULL);
+    if (ret)
+        return;
+
     // Controller keyboard test.
     ret = i8042_command(I8042_CMD_KBD_TEST, param);
     if (ret)
@@ -505,11 +518,6 @@ ps2_keyboard_setup(void *data)
         return;
     }
 
-    /* Disable keyboard */
-    ret = ps2_kbd_command(ATKBD_CMD_RESET_DIS, NULL);
-    if (ret)
-        return;
-
     // Set scancode command (mode 2)
     param[0] = 0x02;
     ret = ps2_kbd_command(ATKBD_CMD_SSCANSET, param);

From 55c74f05ea63ba80e5daa455b0f55e3bba18e842 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 7 Sep 2018 18:30:29 -0500
Subject: [PATCH 7/9] buildversion: fall back to commit hash

---
 scripts/buildversion.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/scripts/buildversion.py b/scripts/buildversion.py
index 8875497c..e946571a 100755
--- a/scripts/buildversion.py
+++ b/scripts/buildversion.py
@@ -36,7 +36,7 @@ def git_version():
     if not os.path.exists('.git'):
         logging.debug("No '.git' file/directory found")
         return ""
-    ver = check_output("git describe --always --tags --long --dirty").strip()
+    ver = check_output("git describe --always --tags --long --dirty --always").strip()
     logging.debug("Got git version: %s" % (repr(ver),))
     return ver
 

From b065c7308f0fa309fe63e1b47e15531853996cb3 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Tue, 11 Sep 2018 16:54:53 -0500
Subject: [PATCH 8/9] SeaVGABios/cbvga: Fix bpp calculation for coreboot
 framebuffer

Commit 4b42cc4 [SeaVGABios/cbvga: Advertise correct pixel format] neglected
to wrap the cbfb mask size components in GET_FARVAR(), which resulted in a
bogus value for bpp, breaking output on most/all devices.  Fix this by
adding GET_FARVAR() as appropriate.

Additionally, some newer ChromeOS devices still fail even with this fix,
so fall back to using the coreboot reported bit depth if the calculated
valid is invalid.

TEST: build/boot a variety of devices (google/[reef,eve], purism/librem_skl)
using coreboot framebuffer init, verify SeaBIOS boot menu prompt visible.

Signed-off-by: Matt DeVillier <matt.devillier@puri.sm>
---
 vgasrc/cbvga.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/vgasrc/cbvga.c b/vgasrc/cbvga.c
index 859524cb..438d8fda 100644
--- a/vgasrc/cbvga.c
+++ b/vgasrc/cbvga.c
@@ -312,11 +312,17 @@ cbvga_setup(void)
     }
 
     u64 addr = GET_FARVAR(0, cbfb->physical_address);
-    u8 bpp = cbfb->blue_mask_size + cbfb->green_mask_size
-             + cbfb->red_mask_size + cbfb->reserved_mask_size;
+    u8 bpp = GET_FARVAR(0, cbfb->blue_mask_size)
+             + GET_FARVAR(0, cbfb->green_mask_size)
+             + GET_FARVAR(0, cbfb->red_mask_size)
+             + GET_FARVAR(0, cbfb->reserved_mask_size);
     u32 xlines = GET_FARVAR(0, cbfb->x_resolution);
     u32 ylines = GET_FARVAR(0, cbfb->y_resolution);
     u32 linelength = GET_FARVAR(0, cbfb->bytes_per_line);
+    //fall back to coreboot reported bpp if calculated value invalid
+    if (bpp != 15 && bpp != 16 && bpp != 24 && bpp != 32)
+        bpp = GET_FARVAR(0, cbfb->bits_per_pixel);
+
     dprintf(1, "Found FB @ %llx %dx%d with %d bpp (%d stride)\n"
             , addr, xlines, ylines, bpp, linelength);
 

From 1b63074bb336e36a5c8b83bc8a623a37a34e77a8 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 28 May 2014 16:53:38 -0500
Subject: [PATCH 9/9] build: add build scripts, configs

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 build-all.sh                     |  14 +++++
 build-apl-cros.sh                |  15 +++++
 build-bsw-cros.sh                |  19 +++++++
 build-byt-coreboot.sh            |  11 ++++
 build-byt-cros.sh                |  22 ++++++++
 build-hswbdw-book-cros.sh        |  15 +++++
 build-hswbdw-box-cros.sh         |  16 ++++++
 build-hswbdw-coreboot.sh         |   7 +++
 build-kbl-cros.sh                |  16 ++++++
 build-link-cros.sh               |  16 ++++++
 build-skl-cros.sh                |  16 ++++++
 configs/.config-apl-cros         |  92 ++++++++++++++++++++++++++++++
 configs/.config-bsw-cros         |  92 ++++++++++++++++++++++++++++++
 configs/.config-byt-coreboot     |  88 +++++++++++++++++++++++++++++
 configs/.config-byt-cros         |  88 +++++++++++++++++++++++++++++
 configs/.config-hswbdw-book-cros |  94 +++++++++++++++++++++++++++++++
 configs/.config-hswbdw-box-cros  |  90 +++++++++++++++++++++++++++++
 configs/.config-hswbdw-coreboot  |  90 +++++++++++++++++++++++++++++
 configs/.config-kbl-cros         |  92 ++++++++++++++++++++++++++++++
 configs/.config-skl-cros         |  88 +++++++++++++++++++++++++++++
 seabios-link-empty.bin           | Bin 0 -> 2097152 bytes
 21 files changed, 981 insertions(+)
 create mode 100755 build-all.sh
 create mode 100755 build-apl-cros.sh
 create mode 100755 build-bsw-cros.sh
 create mode 100755 build-byt-coreboot.sh
 create mode 100755 build-byt-cros.sh
 create mode 100755 build-hswbdw-book-cros.sh
 create mode 100755 build-hswbdw-box-cros.sh
 create mode 100755 build-hswbdw-coreboot.sh
 create mode 100755 build-kbl-cros.sh
 create mode 100755 build-link-cros.sh
 create mode 100755 build-skl-cros.sh
 create mode 100644 configs/.config-apl-cros
 create mode 100644 configs/.config-bsw-cros
 create mode 100644 configs/.config-byt-coreboot
 create mode 100644 configs/.config-byt-cros
 create mode 100644 configs/.config-hswbdw-book-cros
 create mode 100644 configs/.config-hswbdw-box-cros
 create mode 100644 configs/.config-hswbdw-coreboot
 create mode 100644 configs/.config-kbl-cros
 create mode 100644 configs/.config-skl-cros
 create mode 100644 seabios-link-empty.bin

diff --git a/build-all.sh b/build-all.sh
new file mode 100755
index 00000000..42a9ea55
--- /dev/null
+++ b/build-all.sh
@@ -0,0 +1,14 @@
+#!/bin/bash
+#
+
+build_targets=("bsw-cros" "byt-cros" "byt-coreboot" "hswbdw-coreboot" \
+    "hswbdw-book-cros" "hswbdw-box-cros" "skl-cros" "apl-cros" \ 
+    "kbl-cros" "link-cros");
+for device in ${build_targets[@]}
+do
+    ./build-${device}.sh
+    if [ $? -ne 0 ]; then
+        echo "Error building for ${device}; aborting"
+        exit 1
+    fi
+done
\ No newline at end of file
diff --git a/build-apl-cros.sh b/build-apl-cros.sh
new file mode 100755
index 00000000..24ae3458
--- /dev/null
+++ b/build-apl-cros.sh
@@ -0,0 +1,15 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-apl-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-apl-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${filename} add -f ./out/vgabios.bin -n vgaroms/seavgabios.bin -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.emmc.apl -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-bsw-cros.sh b/build-bsw-cros.sh
new file mode 100755
index 00000000..8add7be8
--- /dev/null
+++ b/build-bsw-cros.sh
@@ -0,0 +1,19 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-bsw-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-bsw-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${filename} add -f ./out/vgabios.bin -n vgaroms/seavgabios.bin -t optionrom
+bootorder=$(mktemp)
+echo -e "/rom@etc/sdcard0\n" > ${bootorder}
+cbfstool ${filename} add -f ${bootorder} -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} add-int -i 0xd131d000 -n etc/sdcard0
+cbfstool ${filename} add-int -i 0xd131f000 -n etc/sdcard1
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-byt-coreboot.sh b/build-byt-coreboot.sh
new file mode 100755
index 00000000..ffe39eba
--- /dev/null
+++ b/build-byt-coreboot.sh
@@ -0,0 +1,11 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-byt-coreboot .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+cp ./out/bios.bin.elf ../coreboot/seabios-byt.bin.elf
+filename="seabios-byt_bootstub-mrchromebox_`date +"%Y%m%d"`.bin"
+cp ./out/bios.bin.elf ${filename}
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-byt-cros.sh b/build-byt-cros.sh
new file mode 100755
index 00000000..6adbe4c6
--- /dev/null
+++ b/build-byt-cros.sh
@@ -0,0 +1,22 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-byt-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-byt-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${filename} add -f ~/dev/coreboot/blobs/soc/intel/byt/book/vgabios.bin -n pci8086,0f31.rom -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.emmc -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} add-int -i 0xd071f000 -n etc/sdcard0
+cbfstool ${filename} add-int -i 0xd071d000 -n etc/sdcard1
+cbfstool ${filename} add-int -i 0xd071c000 -n etc/sdcard2
+cbfstool ${filename} add-int -i 0xd081f000 -n etc/sdcard3
+cbfstool ${filename} add-int -i 0xd081c000 -n etc/sdcard4
+cbfstool ${filename} add-int -i 0xd091f000 -n etc/sdcard5
+cbfstool ${filename} add-int -i 0xd091c000 -n etc/sdcard6
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-hswbdw-book-cros.sh b/build-hswbdw-book-cros.sh
new file mode 100755
index 00000000..ca20a61f
--- /dev/null
+++ b/build-hswbdw-book-cros.sh
@@ -0,0 +1,15 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-hswbdw-book-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-hswbdw_book-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+cbfstool ${filename} add -f ./out/vgabios.bin -n vgaroms/seavgabios.bin -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.ssd -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-hswbdw-box-cros.sh b/build-hswbdw-box-cros.sh
new file mode 100755
index 00000000..69cb7140
--- /dev/null
+++ b/build-hswbdw-box-cros.sh
@@ -0,0 +1,16 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-hswbdw-box-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-hswbdw_box-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+cbfstool ${filename} add -f ~/dev/coreboot/blobs/soc/intel/hsw/box/vgabios.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.ssd -n bootorder -t raw
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/links.hswbdw -n links -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-hswbdw-coreboot.sh b/build-hswbdw-coreboot.sh
new file mode 100755
index 00000000..84834c9e
--- /dev/null
+++ b/build-hswbdw-coreboot.sh
@@ -0,0 +1,7 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-hswbdw-coreboot .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+cp ./out/bios.bin.elf ../coreboot/seabios-hswbdw.bin.elf
diff --git a/build-kbl-cros.sh b/build-kbl-cros.sh
new file mode 100755
index 00000000..d5dfcc8a
--- /dev/null
+++ b/build-kbl-cros.sh
@@ -0,0 +1,16 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-kbl-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-kbl-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${filename} add -f ./out/vgabios.bin -n vgaroms/seavgabios.bin -t optionrom
+echo "/pci@i0cf8/*@1e,4/drive@0/disk@0\n" > /tmp/bootorder
+cbfstool ${filename} add -f /tmp/bootorder -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-link-cros.sh b/build-link-cros.sh
new file mode 100755
index 00000000..2f490a58
--- /dev/null
+++ b/build-link-cros.sh
@@ -0,0 +1,16 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-hswbdw-box-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-link-mrchromebox_`date +"%Y%m%d"`.bin"
+#cbfstool ${filename} create -m x86 -s 0x00200000 -H $((0x200000 - 0x60)) 
+cp seabios-link-empty.bin ${filename}
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0 -c lzma
+cbfstool ${filename} add -f ~/dev/coreboot/blobs/mainboard/google/link/vgabios.bin -n pci8086,0166.rom -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.ssd -n bootorder -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
diff --git a/build-skl-cros.sh b/build-skl-cros.sh
new file mode 100755
index 00000000..2a01f344
--- /dev/null
+++ b/build-skl-cros.sh
@@ -0,0 +1,16 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-skl-cros .config
+make EXTRAVERSION=-MrChromebox-`date +"%Y.%m.%d"`
+filename="seabios-skl-mrchromebox_`date +"%Y%m%d"`.bin"
+cbfstool ${filename} create -m x86 -s 0x00200000
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+cbfstool ${filename} add -f ~/dev/coreboot/blobs/soc/intel/skl/vgabios.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/bootorder.ssd -n bootorder -t raw
+cbfstool ${filename} add -f ~/dev/coreboot/cbfs/links.skl -n links -t raw
+cbfstool ${filename} add-int -i 3000 -n etc/boot-menu-wait
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+mv ${filename}* ~/dev/firmware/
\ No newline at end of file
diff --git a/configs/.config-apl-cros b/configs/.config-apl-cros
new file mode 100644
index 00000000..a75a57d9
--- /dev/null
+++ b/configs/.config-apl-cros
@@ -0,0 +1,92 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xfffb1000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+# CONFIG_NO_VGABIOS is not set
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+CONFIG_VGA_COREBOOT=y
+CONFIG_BUILD_VGABIOS=y
+CONFIG_VGA_EMULATE_TEXT=y
+CONFIG_VGA_FIXUP_ASM=y
+CONFIG_VGA_ALLOCATE_EXTRA_STACK=y
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+CONFIG_VGA_VBE=y
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-bsw-cros b/configs/.config-bsw-cros
new file mode 100644
index 00000000..68bad9e3
--- /dev/null
+++ b/configs/.config-bsw-cros
@@ -0,0 +1,92 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+# CONFIG_NO_VGABIOS is not set
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+CONFIG_VGA_COREBOOT=y
+CONFIG_BUILD_VGABIOS=y
+CONFIG_VGA_EMULATE_TEXT=y
+CONFIG_VGA_FIXUP_ASM=y
+CONFIG_VGA_ALLOCATE_EXTRA_STACK=y
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+CONFIG_VGA_VBE=y
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-byt-coreboot b/configs/.config-byt-coreboot
new file mode 100644
index 00000000..b378a009
--- /dev/null
+++ b/configs/.config-byt-coreboot
@@ -0,0 +1,88 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0x0
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+CONFIG_FLASH_FLOPPY=y
+# CONFIG_NVME is not set
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-byt-cros b/configs/.config-byt-cros
new file mode 100644
index 00000000..1154baca
--- /dev/null
+++ b/configs/.config-byt-cros
@@ -0,0 +1,88 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+CONFIG_MEGASAS=y
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-hswbdw-book-cros b/configs/.config-hswbdw-book-cros
new file mode 100644
index 00000000..1ed77458
--- /dev/null
+++ b/configs/.config-hswbdw-book-cros
@@ -0,0 +1,94 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLOPPY is not set
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+CONFIG_RTC_TIMER=y
+CONFIG_HARDWARE_IRQ=y
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+# CONFIG_NO_VGABIOS is not set
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+CONFIG_VGA_COREBOOT=y
+CONFIG_BUILD_VGABIOS=y
+CONFIG_VGA_EMULATE_TEXT=y
+CONFIG_VGA_FIXUP_ASM=y
+CONFIG_VGA_ALLOCATE_EXTRA_STACK=y
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+CONFIG_VGA_VBE=y
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-hswbdw-box-cros b/configs/.config-hswbdw-box-cros
new file mode 100644
index 00000000..ffe6c53c
--- /dev/null
+++ b/configs/.config-hswbdw-box-cros
@@ -0,0 +1,90 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+CONFIG_BOOTSPLASH=y
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLOPPY is not set
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+CONFIG_USB_UHCI=y
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+CONFIG_RTC_TIMER=y
+CONFIG_HARDWARE_IRQ=y
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+CONFIG_TCGBIOS=y
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-hswbdw-coreboot b/configs/.config-hswbdw-coreboot
new file mode 100644
index 00000000..058f576b
--- /dev/null
+++ b/configs/.config-hswbdw-coreboot
@@ -0,0 +1,90 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0x0
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLOPPY is not set
+CONFIG_FLASH_FLOPPY=y
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+CONFIG_RTC_TIMER=y
+CONFIG_HARDWARE_IRQ=y
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-kbl-cros b/configs/.config-kbl-cros
new file mode 100644
index 00000000..830d0899
--- /dev/null
+++ b/configs/.config-kbl-cros
@@ -0,0 +1,92 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffc00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_NVME=y
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+# CONFIG_NO_VGABIOS is not set
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+CONFIG_VGA_COREBOOT=y
+CONFIG_BUILD_VGABIOS=y
+CONFIG_VGA_EMULATE_TEXT=y
+CONFIG_VGA_FIXUP_ASM=y
+CONFIG_VGA_ALLOCATE_EXTRA_STACK=y
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+CONFIG_VGA_VBE=y
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/configs/.config-skl-cros b/configs/.config-skl-cros
new file mode 100644
index 00000000..b91c24a9
--- /dev/null
+++ b/configs/.config-skl-cros
@@ -0,0 +1,88 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffc00000
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_SDCARD=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLASH_FLOPPY is not set
+# CONFIG_NVME is not set
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+# CONFIG_USB_UHCI is not set
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+# CONFIG_SERIAL is not set
+# CONFIG_SERCON is not set
+# CONFIG_LPT is not set
+# CONFIG_HARDWARE_IRQ is not set
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=3
+# CONFIG_DEBUG_SERIAL is not set
+# CONFIG_DEBUG_SERIAL_MMIO is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/seabios-link-empty.bin b/seabios-link-empty.bin
new file mode 100644
index 0000000000000000000000000000000000000000..2b1396f0c2fd96bb58b0c9ed8c0ddadbc4f47f7e
GIT binary patch
literal 2097152
zcmeIu!3l#v5J1tjl6dsGslX@!g@E8eQl6bz%IXlY0Izu;h8dXK`@H6U7?*c?ly5mo
zznXJjD}EwCfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZ
zfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&U
zAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7
z2oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N
z0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+
z009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBly
zK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF
z5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk
z1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs
z0RjXF5FkK+009C72oNAZfB*pk1PBlyK!5-N0t5&UAV7cs0RjXF5FkK+009C7{!?I@
WyFTaqOm&LdbK<T-B#yhSWh*=L&1j_n

literal 0
HcmV?d00001

From 4f458c9b641db2b7ca7e40fbfe60fb5512dafdd1 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 13 Jun 2014 17:20:23 -0500
Subject: [PATCH 1/5] boot.c: skip boot menu, boot timeout if only one boot
 device

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/boot.c b/src/boot.c
index 706b7dfe..d7e42d44 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -457,6 +457,12 @@ interactive_bootmenu(void)
     if (! CONFIG_BOOTMENU || !romfile_loadint("etc/show-boot-menu", 1))
         return;
 
+    //skip menu if only one boot device
+    if ( NULL == BootList.first->next ) {
+	printf("\n");
+	return;
+    }
+
     while (get_keystroke(0) >= 0)
         ;
 

From 47e03ec76ba609b2ef13c4697dd2beda3393afab Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 13 Jun 2014 17:21:57 -0500
Subject: [PATCH 2/5] boot.c: fix 'booting' text for USB devices

Currently, booting from a USB device displays the same text as
booting from a hard disk ('Booting from hard disk').
Identify USB devices based on description string and display
identifying text when booting

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

diff --git a/src/boot.c b/src/boot.c
index d7e42d44..d6e8c865 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -304,6 +304,7 @@ static struct hlist_head BootList VARVERIFY32INIT;
 #define IPL_TYPE_FLOPPY      0x01
 #define IPL_TYPE_HARDDISK    0x02
 #define IPL_TYPE_CDROM       0x03
+#define IPL_TYPE_USB	     0x04
 #define IPL_TYPE_CBFS        0x20
 #define IPL_TYPE_BEV         0x80
 #define IPL_TYPE_BCV         0x81
@@ -381,8 +382,17 @@ boot_add_floppy(struct drive_s *drive_g, const char *desc, int prio)
 void
 boot_add_hd(struct drive_s *drive_g, const char *desc, int prio)
 {
-    bootentry_add(IPL_TYPE_HARDDISK, defPrio(prio, DefaultHDPrio)
+    char *usb = "USB";
+    char short_desc[4];
+    memcpy(short_desc, desc, 3);
+    short_desc[3]='\0';
+    if (strcmp(short_desc, usb) == 0) {
+	bootentry_add(IPL_TYPE_USB, defPrio(prio, DefaultHDPrio)
                   , (u32)drive_g, desc);
+    } else {
+    	bootentry_add(IPL_TYPE_HARDDISK, defPrio(prio, DefaultHDPrio)
+                  , (u32)drive_g, desc);
+    }
 }
 
 void
@@ -541,7 +551,7 @@ static int HaveHDBoot, HaveFDBoot;
 static void
 add_bev(int type, u32 vector)
 {
-    if (type == IPL_TYPE_HARDDISK && HaveHDBoot++)
+    if ((type == IPL_TYPE_HARDDISK || type == IPL_TYPE_USB) && HaveHDBoot++)
         return;
     if (type == IPL_TYPE_FLOPPY && HaveFDBoot++)
         return;
@@ -579,6 +589,10 @@ bcv_prepboot(void)
             map_hd_drive(pos->drive);
             add_bev(IPL_TYPE_HARDDISK, 0);
             break;
+	case IPL_TYPE_USB:
+            map_hd_drive(pos->drive);
+            add_bev(IPL_TYPE_USB, 0);
+            break;
         case IPL_TYPE_CDROM:
             map_cd_drive(pos->drive);
             // NO BREAK
@@ -739,6 +753,10 @@ do_boot(int seq_nr)
         printf("Booting from Hard Disk...\n");
         boot_disk(0x80, 1);
         break;
+    case IPL_TYPE_USB:
+        printf("Booting from USB Device...\n");
+        boot_disk(0x80, 1);
+        break;
     case IPL_TYPE_CDROM:
         boot_cdrom((void*)ie->vector);
         break;

From af0f2b574db134375da773f4ff8fdb47a29529c0 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Tue, 2 Dec 2014 12:49:46 -0600
Subject: [PATCH 3/5] boot.c: don't exit boot menu on 'ESC'

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 13 ++-----------
 1 file changed, 2 insertions(+), 11 deletions(-)

diff --git a/src/boot.c b/src/boot.c
index d6e8c865..a70f403f 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -507,26 +507,17 @@ interactive_bootmenu(void)
         printf("\nt. TPM Configuration\n");
     }
 
-    // Get key press.  If the menu key is ESC, do not restart boot unless
-    // 1.5 seconds have passed.  Otherwise users (trained by years of
-    // repeatedly hitting keys to enter the BIOS) will end up hitting ESC
-    // multiple times and immediately booting the primary boot device.
-    int esc_accepted_time = irqtimer_calc(menukey == 1 ? 1500 : 0);
+    // Get key press
     for (;;) {
         scan_code = get_keystroke(1000);
-        if (scan_code == 1 && !irqtimer_check(esc_accepted_time))
-            continue;
         if (tpm_can_show_menu() && scan_code == 20 /* t */) {
             printf("\n");
             tpm_menu();
         }
-        if (scan_code >= 1 && scan_code <= maxmenu+1)
+	if (scan_code > 1 && scan_code <= maxmenu+1)
             break;
     }
     printf("\n");
-    if (scan_code == 0x01)
-        // ESC
-        return;
 
     // Find entry and make top priority.
     int choice = scan_code - 1;

From baea166a67f6fe60adc78fee0e74cf0d6e0b1651 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 16 Mar 2016 18:04:56 -0500
Subject: [PATCH 4/5] sdcard.c: exit controller setup if ver and capabilities
 are invalid

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/hw/sdcard.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/src/hw/sdcard.c b/src/hw/sdcard.c
index 73fef294..79c190a5 100644
--- a/src/hw/sdcard.c
+++ b/src/hw/sdcard.c
@@ -486,9 +486,13 @@ sdcard_controller_setup(struct sdhci_s *regs, int prio)
     if (!(present_state & SP_CARD_INSERTED))
         // No card present
         return;
-    dprintf(3, "sdhci@%p ver=%x cap=%x %x\n", regs
-            , readw(&regs->controller_version)
-            , readl(&regs->cap_lo), readl(&regs->cap_hi));
+    u16 ver = readw(&regs->controller_version);
+    u32 cap_lo = readl(&regs->cap_lo);
+    u32 cap_hi = readl(&regs->cap_hi);
+    dprintf(3, "sdhci@%p ver=%x cap=%x %x\n", regs, ver, cap_lo, cap_hi);
+    if (ver == 0xffff && cap_lo == 0xffffffff && cap_hi == 0xffffffff)
+        //invalid controller address
+        return;
     sdcard_reset(regs, SRF_ALL);
     writew(&regs->irq_signal, 0);
     writew(&regs->irq_enable, 0x01ff);

From 1c76dfc2f4c8b4ac9bf49e3dcf3da4c06bac51e7 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 28 May 2014 16:53:38 -0500
Subject: [PATCH 5/5] add config, build script, tweaks for Tianocore duet

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 build-hswbdw-coreboot-duet.sh |  7 ++++
 configs/.config-hswbdw-duet   | 78 +++++++++++++++++++++++++++++++++++
 src/boot.c                    |  2 +-
 src/bootsplash.c              |  3 ++
 4 files changed, 89 insertions(+), 1 deletion(-)
 create mode 100755 build-hswbdw-coreboot-duet.sh
 create mode 100644 configs/.config-hswbdw-duet

diff --git a/build-hswbdw-coreboot-duet.sh b/build-hswbdw-coreboot-duet.sh
new file mode 100755
index 00000000..5589aa69
--- /dev/null
+++ b/build-hswbdw-coreboot-duet.sh
@@ -0,0 +1,7 @@
+#!/bin/bash
+#
+set -e
+rm -rf ./out
+cp configs/.config-hswbdw-duet .config
+make EXTRAVERSION=-MattDevo-`date +"%Y.%m.%d"`
+cp ./out/bios.bin.elf ../coreboot/seabios-hswbdw-duet.bin.elf
diff --git a/configs/.config-hswbdw-duet b/configs/.config-hswbdw-duet
new file mode 100644
index 00000000..ccb778b2
--- /dev/null
+++ b/configs/.config-hswbdw-duet
@@ -0,0 +1,78 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0
+# CONFIG_MULTIBOOT is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+# CONFIG_AHCI is not set
+# CONFIG_SDCARD is not set
+# CONFIG_MEGASAS is not set
+# CONFIG_FLOPPY is not set
+CONFIG_FLASH_FLOPPY=y
+# CONFIG_PS2PORT is not set
+# CONFIG_USB is not set
+# CONFIG_SERIAL is not set
+# CONFIG_LPT is not set
+CONFIG_RTC_TIMER=y
+CONFIG_HARDWARE_IRQ=y
+CONFIG_PMTIMER=y
+CONFIG_TSC_TIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+# CONFIG_CDROM_BOOT is not set
+CONFIG_PCIBIOS=y
+# CONFIG_APMBIOS is not set
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+# CONFIG_TCGBIOS is not set
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=5
+# CONFIG_DEBUG_SERIAL is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/src/boot.c b/src/boot.c
index a70f403f..bd1c3965 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -737,7 +737,7 @@ do_boot(int seq_nr)
     struct bev_s *ie = &BEV[seq_nr];
     switch (ie->type) {
     case IPL_TYPE_FLOPPY:
-        printf("Booting from Floppy...\n");
+        //printf("Booting from Floppy...\n");
         boot_disk(0x00, CheckFloppySig);
         break;
     case IPL_TYPE_HARDDISK:
diff --git a/src/bootsplash.c b/src/bootsplash.c
index 165c98d0..d09e0d6a 100644
--- a/src/bootsplash.c
+++ b/src/bootsplash.c
@@ -39,6 +39,9 @@ call16_int10(struct bregs *br)
 void
 enable_vga_console(void)
 {
+    if (! CONFIG_BOOTMENU || !romfile_loadint("etc/show-boot-menu", 1))
+        return;
+
     dprintf(1, "Turning on vga text mode console\n");
     struct bregs br;
 
From 20397ab195a8de63a9a9a46d901dc345d779b33f Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 28 May 2014 16:53:38 -0500
Subject: [PATCH 01/14] add build scripts/configs

---
 .config-chromeos  | 84 +++++++++++++++++++++++++++++++++++++++++++++++
 .config-coreboot  | 84 +++++++++++++++++++++++++++++++++++++++++++++++
 build4chromeos.sh | 14 ++++++++
 build4coreboot.sh |  6 ++++
 4 files changed, 188 insertions(+)
 create mode 100644 .config-chromeos
 create mode 100644 .config-coreboot
 create mode 100755 build4chromeos.sh
 create mode 100755 build4coreboot.sh

diff --git a/.config-chromeos b/.config-chromeos
new file mode 100644
index 00000000..26de37e3
--- /dev/null
+++ b/.config-chromeos
@@ -0,0 +1,84 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+CONFIG_BOOTSPLASH=y
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+CONFIG_ATA=y
+# CONFIG_ATA_DMA is not set
+# CONFIG_ATA_PIO32 is not set
+CONFIG_AHCI=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLOPPY is not set
+# CONFIG_PS2PORT is not set
+CONFIG_USB=y
+CONFIG_USB_UHCI=y
+CONFIG_USB_OHCI=y
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+CONFIG_USB_MOUSE=y
+# CONFIG_SERIAL is not set
+# CONFIG_LPT is not set
+CONFIG_PMTIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+CONFIG_MOUSE=y
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=1
+# CONFIG_DEBUG_SERIAL is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/.config-coreboot b/.config-coreboot
new file mode 100644
index 00000000..95f90472
--- /dev/null
+++ b/.config-coreboot
@@ -0,0 +1,84 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+CONFIG_THREADS=y
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+CONFIG_BOOTSPLASH=y
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0x0
+# CONFIG_FLASH_FLOPPY is not set
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+CONFIG_ATA=y
+# CONFIG_ATA_DMA is not set
+# CONFIG_ATA_PIO32 is not set
+CONFIG_AHCI=y
+# CONFIG_MEGASAS is not set
+# CONFIG_FLOPPY is not set
+# CONFIG_PS2PORT is not set
+CONFIG_USB=y
+CONFIG_USB_UHCI=y
+CONFIG_USB_OHCI=y
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+CONFIG_USB_MOUSE=y
+# CONFIG_SERIAL is not set
+# CONFIG_LPT is not set
+CONFIG_PMTIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+CONFIG_MOUSE=y
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+
+#
+# VGA ROM
+#
+CONFIG_NO_VGABIOS=y
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+# CONFIG_VGA_COREBOOT is not set
+# CONFIG_BUILD_VGABIOS is not set
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=1
+# CONFIG_DEBUG_SERIAL is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/build4chromeos.sh b/build4chromeos.sh
new file mode 100755
index 00000000..c2199e49
--- /dev/null
+++ b/build4chromeos.sh
@@ -0,0 +1,14 @@
+#!/bin/bash
+#
+cp .config-chromeos .config
+make
+filename="seabios-panther-`date +"%Y%m%d"`-md.bin"
+cp seabios-empty.bin ${filename}
+../coreboot/util/cbfstool/cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/pci8086,0a06.rom -n pci8086,0a06.rom -t optionrom
+../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/cbfs/boot-menu-key -n etc/boot-menu-key -t raw
+../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/cbfs/boot-menu-message -n etc/boot-menu-message -t raw
+../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/cbfs/boot-menu-wait -n etc/boot-menu-wait -t raw
+../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/cbfs/bootorder -n bootorder -t raw
+../coreboot/util/cbfstool/cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
diff --git a/build4coreboot.sh b/build4coreboot.sh
new file mode 100755
index 00000000..1cb272ae
--- /dev/null
+++ b/build4coreboot.sh
@@ -0,0 +1,6 @@
+#!/bin/bash
+#
+cp .config-coreboot .config
+make
+cp ./out/bios.bin.elf ../coreboot/seabios.bin.elf
+

From cd5c65c504db9cccedc45db9626be623c1c19b01 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 28 May 2014 16:54:18 -0500
Subject: [PATCH 02/14] ignore compiled outputs, checksums, backup files

---
 .gitignore | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/.gitignore b/.gitignore
index f9990feb..ee1acef6 100644
--- a/.gitignore
+++ b/.gitignore
@@ -2,3 +2,6 @@ out
 *.pyc
 .config
 .config.old
+*~
+*.bin
+*.md5

From 497ce36ee8cfc5a3bd06e5208524fe2f387cb59c Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 28 May 2014 16:54:43 -0500
Subject: [PATCH 03/14] tweak/personalize version string

---
 scripts/buildversion.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/scripts/buildversion.sh b/scripts/buildversion.sh
index 516aff5b..e143bd4f 100755
--- a/scripts/buildversion.sh
+++ b/scripts/buildversion.sh
@@ -12,7 +12,7 @@ if [ -z "$BUILD_VERSION" ]; then
     else
         VERSION="?"
     fi
-    VERSION="${VERSION}-`date +"%Y%m%d_%H%M%S"`-`hostname`"
+    VERSION="${VERSION}-`date +"%Y%m%d"`-MattDevo"
 else
     VERSION="$BUILD_VERSION"
 fi

From 1fad3c71d7a7a05f771bce48742471cad3fa7152 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 13 Jun 2014 17:20:23 -0500
Subject: [PATCH 04/14] boot.c: skip boot menu, boot timeout if only one boot
 device

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/boot.c b/src/boot.c
index e0f73a38..ee2f7244 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -456,6 +456,12 @@ interactive_bootmenu(void)
     if (! CONFIG_BOOTMENU || !romfile_loadint("etc/show-boot-menu", 1))
         return;
 
+    //skip menu if only one boot device
+    if ( NULL == BootList.first->next ) {
+	printf("\n");
+	return;
+    }
+
     while (get_keystroke(0) >= 0)
         ;
 

From 1d0dc3b7234cc7a52cef4a2d8112bb6fa1b6fbae Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 13 Jun 2014 17:21:57 -0500
Subject: [PATCH 05/14] boot.c: fix boot text for USB devices

Currently, booting from a USB device displays the same text as
booting from a hard disk ('Booting from hard disk').
Identify USB devices based on description string and display
correct text when booting

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

diff --git a/src/boot.c b/src/boot.c
index ee2f7244..bfe70dcf 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -303,6 +303,7 @@ static struct hlist_head BootList VARVERIFY32INIT;
 #define IPL_TYPE_FLOPPY      0x01
 #define IPL_TYPE_HARDDISK    0x02
 #define IPL_TYPE_CDROM       0x03
+#define IPL_TYPE_USB	     0x04
 #define IPL_TYPE_CBFS        0x20
 #define IPL_TYPE_BEV         0x80
 #define IPL_TYPE_BCV         0x81
@@ -380,8 +381,17 @@ boot_add_floppy(struct drive_s *drive_g, const char *desc, int prio)
 void
 boot_add_hd(struct drive_s *drive_g, const char *desc, int prio)
 {
-    bootentry_add(IPL_TYPE_HARDDISK, defPrio(prio, DefaultHDPrio)
+    char *usb = "USB";
+    char short_desc[4];
+    memcpy(short_desc, desc, 3);
+    short_desc[3]='\0';
+    if (strcmp(short_desc, usb) == 0) {
+	bootentry_add(IPL_TYPE_USB, defPrio(prio, DefaultHDPrio)
                   , (u32)drive_g, desc);
+    } else {
+    	bootentry_add(IPL_TYPE_HARDDISK, defPrio(prio, DefaultHDPrio)
+                  , (u32)drive_g, desc);
+    }
 }
 
 void
@@ -533,7 +543,7 @@ static int HaveHDBoot, HaveFDBoot;
 static void
 add_bev(int type, u32 vector)
 {
-    if (type == IPL_TYPE_HARDDISK && HaveHDBoot++)
+    if ((type == IPL_TYPE_HARDDISK || type == IPL_TYPE_USB) && HaveHDBoot++)
         return;
     if (type == IPL_TYPE_FLOPPY && HaveFDBoot++)
         return;
@@ -571,6 +581,10 @@ bcv_prepboot(void)
             map_hd_drive(pos->drive);
             add_bev(IPL_TYPE_HARDDISK, 0);
             break;
+	case IPL_TYPE_USB:
+            map_hd_drive(pos->drive);
+            add_bev(IPL_TYPE_USB, 0);
+            break;
         case IPL_TYPE_CDROM:
             map_cd_drive(pos->drive);
             // NO BREAK
@@ -731,6 +745,10 @@ do_boot(int seq_nr)
         printf("Booting from Hard Disk...\n");
         boot_disk(0x80, 1);
         break;
+    case IPL_TYPE_USB:
+        printf("Booting from USB Device...\n");
+        boot_disk(0x80, 1);
+        break;
     case IPL_TYPE_CDROM:
         boot_cdrom((void*)ie->vector);
         break;

From a0c8c8512e6275e0e5df133113c64572ddfb188c Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Wed, 11 Jun 2014 02:49:56 -0500
Subject: [PATCH 06/14] update config, build scripts

---
 .config-chromeos                       | 10 +++++-----
 .config-coreboot                       | 10 +++++-----
 build-chromeos.sh                      | 17 +++++++++++++++++
 build4coreboot.sh => build-coreboot.sh |  4 +++-
 build4chromeos.sh                      | 14 --------------
 5 files changed, 30 insertions(+), 25 deletions(-)
 create mode 100755 build-chromeos.sh
 rename build4coreboot.sh => build-coreboot.sh (71%)
 delete mode 100755 build4chromeos.sh

diff --git a/.config-chromeos b/.config-chromeos
index 26de37e3..27cadbba 100644
--- a/.config-chromeos
+++ b/.config-chromeos
@@ -10,7 +10,7 @@ CONFIG_COREBOOT=y
 # CONFIG_QEMU is not set
 # CONFIG_CSM is not set
 # CONFIG_QEMU_HARDWARE is not set
-CONFIG_THREADS=y
+# CONFIG_THREADS is not set
 CONFIG_RELOCATE_INIT=y
 CONFIG_BOOTMENU=y
 CONFIG_BOOTSPLASH=y
@@ -26,7 +26,7 @@ CONFIG_ROM_SIZE=0
 #
 # Hardware support
 #
-CONFIG_ATA=y
+# CONFIG_ATA is not set
 # CONFIG_ATA_DMA is not set
 # CONFIG_ATA_PIO32 is not set
 CONFIG_AHCI=y
@@ -35,7 +35,7 @@ CONFIG_AHCI=y
 # CONFIG_PS2PORT is not set
 CONFIG_USB=y
 CONFIG_USB_UHCI=y
-CONFIG_USB_OHCI=y
+# CONFIG_USB_OHCI is not set
 CONFIG_USB_EHCI=y
 CONFIG_USB_XHCI=y
 CONFIG_USB_MSC=y
@@ -61,7 +61,7 @@ CONFIG_PMM=y
 CONFIG_BOOT=y
 CONFIG_KEYBOARD=y
 CONFIG_KBD_CALL_INT15_4F=y
-CONFIG_MOUSE=y
+# CONFIG_MOUSE is not set
 CONFIG_S3_RESUME=y
 CONFIG_VGAHOOKS=y
 # CONFIG_DISABLE_A20 is not set
@@ -79,6 +79,6 @@ CONFIG_VGA_EXTRA_STACK_SIZE=512
 #
 # Debugging
 #
-CONFIG_DEBUG_LEVEL=1
+CONFIG_DEBUG_LEVEL=3
 # CONFIG_DEBUG_SERIAL is not set
 CONFIG_DEBUG_COREBOOT=y
diff --git a/.config-coreboot b/.config-coreboot
index 95f90472..9067b6aa 100644
--- a/.config-coreboot
+++ b/.config-coreboot
@@ -10,7 +10,7 @@ CONFIG_COREBOOT=y
 # CONFIG_QEMU is not set
 # CONFIG_CSM is not set
 # CONFIG_QEMU_HARDWARE is not set
-CONFIG_THREADS=y
+# CONFIG_THREADS is not set
 CONFIG_RELOCATE_INIT=y
 CONFIG_BOOTMENU=y
 CONFIG_BOOTSPLASH=y
@@ -26,7 +26,7 @@ CONFIG_ROM_SIZE=0
 #
 # Hardware support
 #
-CONFIG_ATA=y
+# CONFIG_ATA is not set
 # CONFIG_ATA_DMA is not set
 # CONFIG_ATA_PIO32 is not set
 CONFIG_AHCI=y
@@ -35,7 +35,7 @@ CONFIG_AHCI=y
 # CONFIG_PS2PORT is not set
 CONFIG_USB=y
 CONFIG_USB_UHCI=y
-CONFIG_USB_OHCI=y
+# CONFIG_USB_OHCI is not set
 CONFIG_USB_EHCI=y
 CONFIG_USB_XHCI=y
 CONFIG_USB_MSC=y
@@ -61,7 +61,7 @@ CONFIG_PMM=y
 CONFIG_BOOT=y
 CONFIG_KEYBOARD=y
 CONFIG_KBD_CALL_INT15_4F=y
-CONFIG_MOUSE=y
+# CONFIG_MOUSE is not set
 CONFIG_S3_RESUME=y
 CONFIG_VGAHOOKS=y
 # CONFIG_DISABLE_A20 is not set
@@ -79,6 +79,6 @@ CONFIG_VGA_EXTRA_STACK_SIZE=512
 #
 # Debugging
 #
-CONFIG_DEBUG_LEVEL=1
+CONFIG_DEBUG_LEVEL=3
 # CONFIG_DEBUG_SERIAL is not set
 CONFIG_DEBUG_COREBOOT=y
diff --git a/build-chromeos.sh b/build-chromeos.sh
new file mode 100755
index 00000000..e13fcfc0
--- /dev/null
+++ b/build-chromeos.sh
@@ -0,0 +1,17 @@
+#!/bin/bash
+#
+rm -rf ./out
+cp .config-chromeos .config
+make
+if [ $? -eq 0 ]; then
+filename="seabios-haswell-`date +"%Y%m%d"`-md.bin"
+cp seabios-empty.bin ${filename}
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+cbfstool ${filename} add -f ~/coreboot/3rdparty/mainboard/google/panther/vgabios.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-wait -n etc/boot-menu-wait -t raw
+cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-key -n etc/boot-menu-key -t raw
+cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-message -n etc/boot-menu-message -t raw
+cbfstool ${filename} add -f ~/coreboot/cbfs/links -n links -t raw
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+fi
diff --git a/build4coreboot.sh b/build-coreboot.sh
similarity index 71%
rename from build4coreboot.sh
rename to build-coreboot.sh
index 1cb272ae..6be1d46f 100755
--- a/build4coreboot.sh
+++ b/build-coreboot.sh
@@ -1,6 +1,8 @@
 #!/bin/bash
 #
+rm -rf ./out
 cp .config-coreboot .config
 make
+if [ $? -eq 0 ]; then
 cp ./out/bios.bin.elf ../coreboot/seabios.bin.elf
-
+fi
diff --git a/build4chromeos.sh b/build4chromeos.sh
deleted file mode 100755
index c2199e49..00000000
--- a/build4chromeos.sh
+++ /dev/null
@@ -1,14 +0,0 @@
-#!/bin/bash
-#
-cp .config-chromeos .config
-make
-filename="seabios-panther-`date +"%Y%m%d"`-md.bin"
-cp seabios-empty.bin ${filename}
-../coreboot/util/cbfstool/cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
-../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/pci8086,0a06.rom -n pci8086,0a06.rom -t optionrom
-../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/cbfs/boot-menu-key -n etc/boot-menu-key -t raw
-../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/cbfs/boot-menu-message -n etc/boot-menu-message -t raw
-../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/cbfs/boot-menu-wait -n etc/boot-menu-wait -t raw
-../coreboot/util/cbfstool/cbfstool ${filename} add -f ../coreboot/cbfs/bootorder -n bootorder -t raw
-../coreboot/util/cbfstool/cbfstool ${filename} print
-md5sum ${filename} > ${filename}.md5

From baa3e6c7e86d36cf2ee9b43a8d1e8ea49fb8e953 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Tue, 2 Dec 2014 12:49:46 -0600
Subject: [PATCH 07/14] boot.c: don't exit boot menu on 'ESC'

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/boot.c | 13 ++-----------
 1 file changed, 2 insertions(+), 11 deletions(-)

diff --git a/src/boot.c b/src/boot.c
index bfe70dcf..43c19607 100644
--- a/src/boot.c
+++ b/src/boot.c
@@ -503,22 +503,13 @@ interactive_bootmenu(void)
                , strtcpy(desc, pos->description, ARRAY_SIZE(desc)));
     }
 
-    // Get key press.  If the menu key is ESC, do not restart boot unless
-    // 1.5 seconds have passed.  Otherwise users (trained by years of
-    // repeatedly hitting keys to enter the BIOS) will end up hitting ESC
-    // multiple times and immediately booting the primary boot device.
-    int esc_accepted_time = irqtimer_calc(menukey == 1 ? 1500 : 0);
+    // Get key press
     for (;;) {
         scan_code = get_keystroke(1000);
-        if (scan_code == 1 && !irqtimer_check(esc_accepted_time))
-            continue;
-        if (scan_code >= 1 && scan_code <= maxmenu+1)
+        if (scan_code > 1 && scan_code <= maxmenu+1)
             break;
     }
     printf("\n");
-    if (scan_code == 0x01)
-        // ESC
-        return;
 
     // Find entry and make top priority.
     int choice = scan_code - 1;

From f836d7397e7e63e38760c16aa53539e1de784ae9 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Tue, 6 Jan 2015 14:32:42 -0600
Subject: [PATCH 08/14] build-chromeos: use non-headless VGA BIOS

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 build-chromeos.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/build-chromeos.sh b/build-chromeos.sh
index e13fcfc0..ec23db6f 100755
--- a/build-chromeos.sh
+++ b/build-chromeos.sh
@@ -7,7 +7,7 @@ if [ $? -eq 0 ]; then
 filename="seabios-haswell-`date +"%Y%m%d"`-md.bin"
 cp seabios-empty.bin ${filename}
 cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
-cbfstool ${filename} add -f ~/coreboot/3rdparty/mainboard/google/panther/vgabios.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename} add -f ~/coreboot/3rdparty/mainboard/google/panther/vgabios_orig.bin -n pci8086,0406.rom -t optionrom
 cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-wait -n etc/boot-menu-wait -t raw
 cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-key -n etc/boot-menu-key -t raw
 cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-message -n etc/boot-menu-message -t raw

From 31b504bb726b29838ebabae627a519b4dc977bba Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Fri, 23 Jan 2015 12:46:20 -0600
Subject: [PATCH 09/14] build-chromeos: create separate payload for Chromebooks
 w/proper VGA BIOS

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 build-chromeos.sh | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/build-chromeos.sh b/build-chromeos.sh
index ec23db6f..098640fb 100755
--- a/build-chromeos.sh
+++ b/build-chromeos.sh
@@ -4,7 +4,8 @@ rm -rf ./out
 cp .config-chromeos .config
 make
 if [ $? -eq 0 ]; then
-filename="seabios-haswell-`date +"%Y%m%d"`-md.bin"
+filename="seabios-haswell-box-`date +"%Y%m%d"`-md.bin"
+filename2="seabios-haswell-book-`date +"%Y%m%d"`-md.bin"
 cp seabios-empty.bin ${filename}
 cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
 cbfstool ${filename} add -f ~/coreboot/3rdparty/mainboard/google/panther/vgabios_orig.bin -n pci8086,0406.rom -t optionrom
@@ -14,4 +15,13 @@ cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-message -n etc/boot-menu-m
 cbfstool ${filename} add -f ~/coreboot/cbfs/links -n links -t raw
 cbfstool ${filename} print
 md5sum ${filename} > ${filename}.md5
+cp seabios-empty.bin ${filename2}
+cbfstool ${filename2} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+cbfstool ${filename2} add -f ~/coreboot/3rdparty/mainboard/google/peppy/vgabios.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename2} add -f ~/coreboot/cbfs/boot-menu-wait -n etc/boot-menu-wait -t raw
+cbfstool ${filename2} add -f ~/coreboot/cbfs/boot-menu-key -n etc/boot-menu-key -t raw
+cbfstool ${filename2} add -f ~/coreboot/cbfs/boot-menu-message -n etc/boot-menu-message -t raw
+cbfstool ${filename2} add -f ~/coreboot/cbfs/links -n links -t raw
+cbfstool ${filename2} print
+md5sum ${filename2} > ${filename2}.md5
 fi

From 70df87c6208db4f285fff5d9ab943dc7b55913ea Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Sat, 24 Jan 2015 22:59:07 -0600
Subject: [PATCH 10/14] config-chromeos: add PS2 keyboard support for
 Chromebooks

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 .config-chromeos | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/.config-chromeos b/.config-chromeos
index 27cadbba..e5d07524 100644
--- a/.config-chromeos
+++ b/.config-chromeos
@@ -27,12 +27,10 @@ CONFIG_ROM_SIZE=0
 # Hardware support
 #
 # CONFIG_ATA is not set
-# CONFIG_ATA_DMA is not set
-# CONFIG_ATA_PIO32 is not set
 CONFIG_AHCI=y
 # CONFIG_MEGASAS is not set
 # CONFIG_FLOPPY is not set
-# CONFIG_PS2PORT is not set
+CONFIG_PS2PORT=y
 CONFIG_USB=y
 CONFIG_USB_UHCI=y
 # CONFIG_USB_OHCI is not set
@@ -42,7 +40,6 @@ CONFIG_USB_MSC=y
 CONFIG_USB_UAS=y
 CONFIG_USB_HUB=y
 CONFIG_USB_KEYBOARD=y
-CONFIG_USB_MOUSE=y
 # CONFIG_SERIAL is not set
 # CONFIG_LPT is not set
 CONFIG_PMTIMER=y

From cf76e9be6fdfdfcdadd31033de2d33e13de68427 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Thu, 29 Jan 2015 18:33:54 -0600
Subject: [PATCH 11/14] build-chromeos: use updated HSW/BDW VGA BIOS

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 build-chromeos.sh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/build-chromeos.sh b/build-chromeos.sh
index 098640fb..b20936f1 100755
--- a/build-chromeos.sh
+++ b/build-chromeos.sh
@@ -8,7 +8,7 @@ filename="seabios-haswell-box-`date +"%Y%m%d"`-md.bin"
 filename2="seabios-haswell-book-`date +"%Y%m%d"`-md.bin"
 cp seabios-empty.bin ${filename}
 cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
-cbfstool ${filename} add -f ~/coreboot/3rdparty/mainboard/google/panther/vgabios_orig.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename} add -f ~/coreboot/3rdparty/mainboard/google/panther/hsw_1035_cbox.dat -n pci8086,0406.rom -t optionrom
 cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-wait -n etc/boot-menu-wait -t raw
 cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-key -n etc/boot-menu-key -t raw
 cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-message -n etc/boot-menu-message -t raw
@@ -17,7 +17,7 @@ cbfstool ${filename} print
 md5sum ${filename} > ${filename}.md5
 cp seabios-empty.bin ${filename2}
 cbfstool ${filename2} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
-cbfstool ${filename2} add -f ~/coreboot/3rdparty/mainboard/google/peppy/vgabios.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename2} add -f ~/coreboot/3rdparty/mainboard/google//panther/hsw_1035_cbook.dat -n pci8086,0406.rom -t optionrom
 cbfstool ${filename2} add -f ~/coreboot/cbfs/boot-menu-wait -n etc/boot-menu-wait -t raw
 cbfstool ${filename2} add -f ~/coreboot/cbfs/boot-menu-key -n etc/boot-menu-key -t raw
 cbfstool ${filename2} add -f ~/coreboot/cbfs/boot-menu-message -n etc/boot-menu-message -t raw

From 7af634b81d6ceca0e6d13eb616a7629d7f1f68ef Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Thu, 19 Mar 2015 23:50:01 -0500
Subject: [PATCH 12/14] c740: added config, build script for legacy bios
 payload for Acer C740

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 .config-c740  | 84 +++++++++++++++++++++++++++++++++++++++++++++++++++
 build-c740.sh | 17 +++++++++++
 2 files changed, 101 insertions(+)
 create mode 100644 .config-c740
 create mode 100755 build-c740.sh

diff --git a/.config-c740 b/.config-c740
new file mode 100644
index 00000000..7b288aca
--- /dev/null
+++ b/.config-c740
@@ -0,0 +1,84 @@
+#
+# Automatically generated file; DO NOT EDIT.
+# SeaBIOS Configuration
+#
+
+#
+# General Features
+#
+CONFIG_COREBOOT=y
+# CONFIG_QEMU is not set
+# CONFIG_CSM is not set
+# CONFIG_QEMU_HARDWARE is not set
+# CONFIG_THREADS is not set
+CONFIG_RELOCATE_INIT=y
+CONFIG_BOOTMENU=y
+# CONFIG_BOOTSPLASH is not set
+CONFIG_BOOTORDER=y
+CONFIG_COREBOOT_FLASH=y
+CONFIG_LZMA=y
+CONFIG_CBFS_LOCATION=0xffe00000
+CONFIG_FLASH_FLOPPY=y
+CONFIG_ENTRY_EXTRASTACK=y
+CONFIG_MALLOC_UPPERMEMORY=y
+CONFIG_ROM_SIZE=0
+
+#
+# Hardware support
+#
+# CONFIG_ATA is not set
+CONFIG_AHCI=y
+CONFIG_MEGASAS=y
+# CONFIG_FLOPPY is not set
+CONFIG_PS2PORT=y
+CONFIG_USB=y
+CONFIG_USB_UHCI=y
+# CONFIG_USB_OHCI is not set
+CONFIG_USB_EHCI=y
+CONFIG_USB_XHCI=y
+CONFIG_USB_MSC=y
+CONFIG_USB_UAS=y
+CONFIG_USB_HUB=y
+CONFIG_USB_KEYBOARD=y
+CONFIG_SERIAL=y
+# CONFIG_LPT is not set
+CONFIG_PMTIMER=y
+
+#
+# BIOS interfaces
+#
+CONFIG_DRIVES=y
+CONFIG_CDROM_BOOT=y
+CONFIG_CDROM_EMU=y
+CONFIG_PCIBIOS=y
+CONFIG_APMBIOS=y
+CONFIG_PNPBIOS=y
+CONFIG_OPTIONROMS=y
+CONFIG_PMM=y
+CONFIG_BOOT=y
+CONFIG_KEYBOARD=y
+CONFIG_KBD_CALL_INT15_4F=y
+# CONFIG_MOUSE is not set
+CONFIG_S3_RESUME=y
+CONFIG_VGAHOOKS=y
+# CONFIG_DISABLE_A20 is not set
+
+#
+# VGA ROM
+#
+# CONFIG_NO_VGABIOS is not set
+# CONFIG_VGA_GEODEGX2 is not set
+# CONFIG_VGA_GEODELX is not set
+CONFIG_VGA_COREBOOT=y
+CONFIG_BUILD_VGABIOS=y
+CONFIG_VGA_EMULATE_TEXT=y
+CONFIG_VGA_ALLOCATE_EXTRA_STACK=y
+CONFIG_VGA_EXTRA_STACK_SIZE=512
+CONFIG_VGA_VBE=y
+
+#
+# Debugging
+#
+CONFIG_DEBUG_LEVEL=8
+# CONFIG_DEBUG_SERIAL is not set
+CONFIG_DEBUG_COREBOOT=y
diff --git a/build-c740.sh b/build-c740.sh
new file mode 100755
index 00000000..c80f7156
--- /dev/null
+++ b/build-c740.sh
@@ -0,0 +1,17 @@
+#!/bin/bash
+#
+rm -rf ./out
+cp .config-c740 .config
+make
+if [ $? -eq 0 ]; then
+filename="seabios-c740-`date +"%Y%m%d"`-md.bin"
+cp seabios-empty.bin ${filename}
+cbfstool ${filename} add-payload -f ./out/bios.bin.elf -n payload -b 0x0
+cbfstool ${filename} add -f ./out/vgabios.bin -n pci8086,0406.rom -t optionrom
+cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-wait -n etc/boot-menu-wait -t raw
+cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-key -n etc/boot-menu-key -t raw
+cbfstool ${filename} add -f ~/coreboot/cbfs/boot-menu-message -n etc/boot-menu-message -t raw
+cbfstool ${filename} add -f ~/coreboot/cbfs/links-bdw -n links -t raw
+cbfstool ${filename} print
+md5sum ${filename} > ${filename}.md5
+fi

From c50aab7dcee3d54011862f490baf09c2e59a0ccf Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Sun, 22 Mar 2015 22:07:02 -0500
Subject: [PATCH 13/14] bootsplash: customize version string for VS Networks

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/bootsplash.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/bootsplash.c b/src/bootsplash.c
index c572685d..7f8233b9 100644
--- a/src/bootsplash.c
+++ b/src/bootsplash.c
@@ -48,7 +48,7 @@ enable_vga_console(void)
     call16_int10(&br);
 
     // Write to screen.
-    printf("SeaBIOS (version %s)\n", VERSION);
+    printf("VS Networks CB-02\n");
     display_uuid();
 }
 

From 7c3f9dea3681c2df96186b1732db6d4f6244c2c1 Mon Sep 17 00:00:00 2001
From: Matt DeVillier <matt.devillier@gmail.com>
Date: Mon, 12 Oct 2015 22:12:44 -0500
Subject: [PATCH 14/14] bootsplash: update version string for AOpen BT
 ChromeBox

Signed-off-by: Matt DeVillier <matt.devillier@gmail.com>
---
 src/bootsplash.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/bootsplash.c b/src/bootsplash.c
index 7f8233b9..a9f533e2 100644
--- a/src/bootsplash.c
+++ b/src/bootsplash.c
@@ -48,7 +48,7 @@ enable_vga_console(void)
     call16_int10(&br);
 
     // Write to screen.
-    printf("VS Networks CB-02\n");
+    printf("VS Networks CB-BT-01\n");
     display_uuid();
 }
 
